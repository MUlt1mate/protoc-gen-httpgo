syntax = "proto3";

package example;
option go_package = "github.com/MUlt1mate/protoc-gen-httpgo/example/proto;proto";

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/any.proto";
import "common/structs.proto";

service ServiceName {
  rpc RPCName (common.InputMsgName) returns (common.OutputMsgName) {
    option (google.api.http) = {
      post: "/v1/test/{stringArgument}/{int64Argument}"
    };
  }
  rpc AllTypesTest (common.AllTypesMsg) returns (common.AllTypesMsg) {
    option (google.api.http) = {
      post: "/v1/test/{BoolValue}/{EnumValue}/{Int32Value}/{Sint32Value}/{Uint32Value}/{Int64Value}/{Sint64Value}/{Uint64Value}/{Sfixed32Value}/{Fixed32Value}/{FloatValue}/{Sfixed64Value}/{Fixed64Value}/{DoubleValue}/{StringValue}/{BytesValue}"
    };
  }
  rpc AllTextTypesPost (common.AllTextTypesMsg) returns (common.AllTextTypesMsg) {
    option (google.api.http) = {
      post: "/v1/text/{String}/{RepeatedString}/{Bytes}/{RepeatedBytes}/{Enum}/{RepeatedEnum}"
    };
  }
  rpc AllTextTypesGet (common.AllTextTypesMsg) returns (common.AllTextTypesMsg) {
    option (google.api.http) = {
      get: "/v2/text/{String}/{RepeatedString}/{Bytes}/{RepeatedBytes}/{Enum}/{RepeatedEnum}"
    };
  }
  rpc CommonTypes (google.protobuf.Any) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      post: "/v1/test/commonTypes"
    };
  }
  // same types but different query, we need different query builder function
  rpc sameInputAndOutput (common.InputMsgName) returns (common.OutputMsgName) {
    option (google.api.http) = {
      post: "/v1/test/{stringArgument}"
    };
  }
  // should be ignored
  rpc methodWithoutPath (common.InputMsgName) returns (common.OutputMsgName) {}
  // should be ignored
  rpc streams(stream common.InputMsgName) returns (stream common.OutputMsgName){
    option (google.api.http) = {
      post: "/v1/test/stream"
    };
  };
  rpc optional(common.OptionalField) returns (common.OptionalField){
    option (google.api.http) = {
      post: "/v1/test/optional"
    };
  };
  rpc GetMethod(common.InputMsgName) returns (common.OutputMsgName){
    option (google.api.http) = {
      get: "/v1/test/get"
    };
  };
  rpc CheckRepeatedPath(common.RepeatedCheck) returns (common.RepeatedCheck){
    option (google.api.http) = {
      get: "/v1/repeated/{BoolValue}/{EnumValue}/{Int32Value}/{Sint32Value}/{Uint32Value}/{Int64Value}/{Sint64Value}/{Uint64Value}/{Sfixed32Value}/{Fixed32Value}/{FloatValue}/{Sfixed64Value}/{Fixed64Value}/{DoubleValue}/{StringValue}/{BytesValue}/{StringValueQuery}"
    };
  };
  rpc CheckRepeatedQuery(common.RepeatedCheck) returns (common.RepeatedCheck){
    option (google.api.http) = {
      get: "/v1/repeated/{StringValue}"
    };
  };
  rpc CheckRepeatedPost(common.RepeatedCheck) returns (common.RepeatedCheck){
    option (google.api.http) = {
      post: "/v1/repeated/{StringValue}"
    };
  };
  rpc EmptyGet(common.Empty) returns (common.Empty){
    option (google.api.http) = {
      get: "/v1/emptyGet"
    };
  };
  rpc EmptyPost(common.Empty) returns (common.Empty){
    option (google.api.http) = {
      post: "/v1/emptyPost"
    };
  };
  rpc TopLevelArray(common.Empty) returns (common.Array){
    option (google.api.http) = {
      post: "/v1/array",
      response_body: "items"
    };
  };
  rpc OnlyStructInGet(common.OnlyStruct) returns (common.Empty){
    option (google.api.http) = {
      post: "/v1/onlyStruct"
    };
  };
  rpc MultipartForm(common.MultipartFormRequest) returns (common.Empty){
    option (google.api.http) = {
      post: "/v1/multipart"
    };
  };
  rpc MultipartFormAllTypes(common.MultipartFormAllTypes) returns (common.Empty){
    option (google.api.http) = {
      post: "/v1/multipartall"
    };
  };
}
